"use strict";(self.webpackChunkgytree_v2=self.webpackChunkgytree_v2||[]).push([[541],{6541:(B,g,r)=>{r.r(g),r.d(g,{SignupModule:()=>M});var u=r(6814),o=r(95),p=r(3560),m=r(8454),f=r(6676),e=r(8926),c=r(2528),v=r(2870),b=r(1411),S=r(9229),d=r(3603),x=r(5896),F=r(169),T=r(2130),h=r(9862);let k=(()=>{var t;class s extends T.b{constructor(n,i){super(n,i),this.httpClient=n,this.tokenStorage=i}}return(t=s).\u0275fac=function(n){return new(n||t)(e.LFG(h.eN),e.LFG(d.i))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var y=r(6593);function I(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"div",21)(2,"span",22),e._uU(3),e.qZA()(),e.BQk()),2&t){const l=e.oxw().message;e.xp6(3),e.hij(" ",l," ")}}function C(t,s){if(1&t&&e.YNc(0,I,4,1,"ng-container",20),2&t){const l=s.control;e.Q6J("ngIf",l.hasError(s.validation)&&(l.dirty||l.touched))}}const D=function(t){return{validation:"required",message:"Full Name is required",control:t}},N=function(t){return{validation:"pattern",message:"Full Name is invalid",control:t}},Y=function(t){return{validation:"required",message:"Birth Date is required",control:t}},Z=function(t){return{validation:"required",message:"Height is required",control:t}},w=function(t){return{validation:"required",message:"Weight is required",control:t}},O=function(t){return{validation:"required",message:"Email is required",control:t}},U=function(t){return{validation:"pattern",message:"Email is invalid",control:t}};let q=(()=>{var t;class s{constructor(n,i,a,L,E,P,Q,G,R,V,j){this.router=n,this.localStorageService=i,this.loaderService=a,this.activeSanpSot=L,this.toastrService=E,this.tokenStorage=P,this.authenticationService=Q,this.activatedRoute=G,this.WebengageDataService=R,this.referPointsService=V,this.titleService=j,this.subscriptions=[],this.isLoading=!0,this.checkIsLoading()}checkIsLoading(){this.loaderService.isLoading.subscribe(n=>{this.isLoading=n||n})}ngOnInit(){this.initForm(),this.titleService.setTitle("Gytree - SignUp"),(0,m.initTE)({Datepicker:m.Datepicker}),this.birthDatePickerInit()}initForm(){this.signupForm=new o.cw({userName:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(3),o.kI.pattern(p.i.ONLY_SPACE_RESTRICT)])),dob:new o.NI("",o.kI.required),height:new o.NI("",o.kI.required),weight:new o.NI("",o.kI.required),email:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern(p.i.EMAIL_PATTERN)])),consult:new o.NI(!0),mobileNumber:new o.NI(this.activeSanpSot.snapshot.queryParamMap.get("mobilenumber"))})}checkMobileAviablity(){this.signupForm.getRawValue().mobileNumber||this.router.navigate(["/login"])}birthDatePickerInit(){new m.Datepicker(document.querySelector("#birthDatePickerContainer"),{max:this.getMaxDate(),startDate:this.getMaxDate()},{inline:!0,disableFuture:!0},{datepickerToggleButton:"flex items-center justify-content-center [&>svg]:w-5 [&>svg]:h-5 absolute outline-none border-none bg-transparent right-0.5 top-1/2 -translate-x-1/2 -translate-y-1/2 hover:text-theme-theme-lightest-pink focus:text-theme-theme-lightest-pink"})}getMaxDate(){const n=new Date;return n.setFullYear(n.getFullYear()-10),new Date(n.getFullYear(),n.getMonth(),n.getDate())}nextEvent(){if(this.signupForm.invalid)return;const n=f(this.signupForm?.controls.dob?.value,"DD/MM/YYYY").format("YYYY-MM-DD"),i={user_email:this.signupForm.controls.email.value,user_name:this.signupForm.controls.userName.value.trim(),user_dob:n,user_height:this.signupForm.controls.height.value?.toString(),user_weight:this.signupForm.controls.weight.value?.toString(),user_wp_update:!!this.signupForm.controls.consult.value};this.subscriptions.push(this.authenticationService.registerUser(i).subscribe(a=>{a&&(this.localStorageService.removeItem("guestUserDetail"),localStorage.getItem("ref_code"),this.getUserData())},a=>{console.log(a),this.toastrService.error(a?.error?.message,void 0,{positionClass:"toast-top-center",closeButton:!0})}))}getUserData(){this.subscriptions.push(this.authenticationService.getUser().subscribe(n=>{n?.success&&(this.localStorageService.setItem("userSlug",n?.data?.data),this.router.navigate([("/dashboard"===this.localStorageService.getItem("URL")?"/":this.localStorageService.getItem("URL"))||"/"]))}))}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}return(t=s).\u0275fac=function(n){return new(n||t)(e.Y36(c.F0),e.Y36(v.n),e.Y36(b.D),e.Y36(c.gz),e.Y36(S._W),e.Y36(d.i),e.Y36(x.e),e.Y36(c.gz),e.Y36(F.q),e.Y36(k),e.Y36(y.Dx))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-signup"]],decls:38,vars:31,consts:[["novalidate","novalidate",1,"form","w-100","p-[50px]",3,"formGroup"],[1,"mb-5","mt-20","py-2","justify-center","flex","text-2xl","font-bold","font-lora"],[1,"w-fit","mx-auto","max-w-full","px-3","pt-8"],[1,"col-span-12","md:col-span-6"],[1,"mb-5"],[1,"relative"],["type","text","name","userName","formControlName","userName","autocomplete","off","placeholder","Full Name",1,"w-full","px-4","py-2","bg-transparent","rounded-full","appearance-none","font-roboto","border","border-theme-lightest-pink","focus:outline-none","focus:ring-0","peer"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["id","birthDatePickerContainer",1,"relative"],["type","text","id","birthDatePicker","name","dob","formControlName","dob","placeholder","Birth Date","onkeydown","return false",1,"w-full","px-4","py-2","bg-transparent","border","rounded-full","appearance-none","font-roboto","border-theme-lightest-pink","focus:outline-none","focus:ring-0","peer"],["type","number","name","height","formControlName","height","autocomplete","off","placeholder","Height (in cm)",1,"w-full","px-4","py-2","bg-transparent","border","rounded-full","appearance-none","font-roboto","border-theme-lightest-pink","focus:outline-none","focus:ring-0","peer"],["type","number","name","weight","formControlName","weight","autocomplete","off","placeholder","Weight (in kg)",1,"w-full","px-4","py-2","bg-transparent","border","rounded-full","appearance-none","font-roboto","border-theme-lightest-pink","focus:outline-none","focus:ring-0","peer"],["type","email","name","email","formControlName","email","autocomplete","off","placeholder","Email Id",1,"w-full","px-4","py-2","bg-transparent","border","rounded-full","appearance-none","font-roboto","border-theme-lightest-pink","focus:outline-none","focus:ring-0","peer"],[1,"flex","justify-center","gap-2"],[1,"form-check","mt-5","text-center"],["type","checkbox","id","consult","name","consult","formControlName","consult",1,"form-check-input"],["for","consult",1,"form-check-label","ml-2"],[1,"text-center","mt-5"],[1,"inline-block","px-7","py-1.5","mx-auto","text-lg","sm:text-xl","text-white","rounded-full","font-roboto","bg-theme-light-maroon",3,"disabled","ngClass","click"],["formError",""],[4,"ngIf"],[1,"fv-plugins-message-container","text-danger"],["role","alert",1,""]],template:function(n,i){if(1&n&&(e.TgZ(0,"form",0)(1,"div",1),e._uU(2," Let's get to know you a bit better "),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"input",6),e.qZA(),e.GkF(8,7)(9,7),e.qZA(),e.TgZ(10,"div",4)(11,"div",8),e._UZ(12,"input",9),e.qZA(),e.GkF(13,7),e.qZA(),e.TgZ(14,"div",4)(15,"div",5),e._UZ(16,"input",10),e.GkF(17,7),e.qZA()(),e.TgZ(18,"div",4)(19,"div",5),e._UZ(20,"input",11),e.GkF(21,7),e.qZA()(),e.TgZ(22,"div",4)(23,"div",5),e._UZ(24,"input",12),e.GkF(25,7)(26,7),e.qZA()(),e.TgZ(27,"div",13)(28,"div",14),e._UZ(29,"input",15),e.TgZ(30,"label",16)(31,"strong"),e._uU(32,"Send me WhatsApp updates (important for appointment alerts)"),e.qZA()()()()()(),e.TgZ(33,"div",17)(34,"button",18),e.NdJ("click",function(){return i.nextEvent()}),e._uU(35," Next "),e.qZA()()(),e.YNc(36,C,1,1,"ng-template",null,19,e.W1O)),2&n){const a=e.MAs(37);e.Q6J("formGroup",i.signupForm),e.xp6(8),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(17,D,i.signupForm.controls.userName)),e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(19,N,i.signupForm.controls.userName)),e.xp6(4),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(21,Y,i.signupForm.controls.dob)),e.xp6(4),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(23,Z,i.signupForm.controls.height)),e.xp6(4),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(25,w,i.signupForm.controls.weight)),e.xp6(4),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(27,O,i.signupForm.controls.email)),e.xp6(1),e.Q6J("ngTemplateOutlet",a)("ngTemplateOutletContext",e.VKq(29,U,i.signupForm.controls.email)),e.xp6(8),e.Q6J("disabled",i.signupForm.invalid)("ngClass",i.signupForm.invalid?"opacity-60":"")}},dependencies:[u.mk,u.O5,u.tP,o._Y,o.Fj,o.wV,o.Wl,o.JJ,o.JL,o.sg,o.u]}),s})();var A=r(6905);const J=[{path:"",component:q}];let M=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,o.u5,o.UX,h.JF,c.Bz.forChild(J),A.j]}),s})()}}]);